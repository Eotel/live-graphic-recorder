# 利用料ざっくり見積もり（5時間の会議）

このドキュメントは **「人間の会議の会話量」ベース**で、Live Graphic Recorder を 5 時間使った場合のコストを概算します。

> 注意: 実際の課金は各ベンダーの請求体系（最低月額 / 含有クレジット / 従量 / 無料枠 / 上限 / 地域課税など）に依存します。
> ここでは「だいたい」を掴むためのモデル化をしています。

## 前提（このリポジトリの実装）

- OpenAI 解析モデル: `gpt-5.2`（`src/config/constants.ts`）
- 画像生成: Gemini `gemini-2.5-flash-image`（`src/config/constants.ts`）
- 画像生成頻度: 解析 1 回につき 1 枚生成（`src/services/server/analysis.ts` → `geminiService.generateImage(...)`）
- 解析トリガ:
  - 最低 5 分間隔（`ANALYSIS_INTERVAL_MS = 5分`）
  - または 500 words（`ANALYSIS_WORD_THRESHOLD = 500`）
  - ※日本語の Deepgram 文字起こしはスペースが少ないため、実運用では「500 words」ではなく **5分間隔側で走る**ケースが多い想定
- 画像解像度（Gemini Pro の 1K/2K/4K）:
  - 現状の実装は `imageConfig.aspectRatio` しか指定しておらず、`imageConfig.imageSize` は未指定
  - SDK 型定義上は未指定の場合 `1K` がデフォルト（= Pro の 4K 料金にはならない想定）

この見積もりでは、5時間=300分 → **約60回の解析**（=60枚の画像）を基本ケースとします。

## 料金ソース（2026-02-06 時点の参照）

- OpenAI `gpt-5.2`: Input `$1.75 / 1M tokens`, Output `$14 / 1M tokens`
  - https://openai.com/api/pricing/
  - https://platform.openai.com/docs/models/gpt-5.2
- Cartesia: Pro `$4 / month (billed yearly)` で `100K credits`、Sonic TTS は `1 credit per character`
  - https://cartesia.ai/pricing
- Gemini（画像生成）:
  - Flash: `gemini-2.5-flash-image` → `Output $0.039 per image`（Batch だと `$0.0195 per image`）
  - Pro（本リポジトリでの代表例）: `gemini-3-pro-image-preview`
    - `Output $0.134 per 1K/2K image`
    - `Output $0.24 per 4K image`
  - https://ai.google.dev/pricing

為替（USD→JPY）は、見積もり表示のために固定値を置きます（必要に応じて差し替えてください）。

- 例: `1 USD = 156.843498 JPY`（ExchangeRate-API の `time_last_update_utc Fri, 06 Feb 2026 00:02:31 +0000` を使用）

## 会話量のモデル化（Sonic）

- 会議時間: `5時間 = 300分`
- 会話密度（日本語）: `150〜300 文字/分`（代表値 `200 文字/分`）
- Sonic クレジット: `1 credit = 1 character`

よって、Sonic 消費クレジットは:

`credits = 文字/分 × 300分`

Cartesia Pro の「実効単価」を **$4 / 100,000 credits = $0.00004/credit** とみなすと（※月額の按分）:

`Cartesia_usd ≒ credits × 0.00004`

> すでに Pro を契約していて月内の含有クレジットに収まるなら、限界費用はほぼ $0 です。
> 一方で「この5時間分を全部載せたい」なら、最低でも $4（月額）が乗る考え方もあり得ます。

## 画像生成のモデル化（Gemini）

- 解析回数（=画像枚数）: 基本ケース `60枚`
- 単価（Standard）:
  - Flash（`gemini-2.5-flash-image`）: `$0.039 / image`
  - Pro（例: `gemini-3-pro-image-preview`）:
    - `1K/2K`（デフォルト想定）: `$0.134 / image`
    - `4K`（`imageSize=4K` を指定した場合）: `$0.24 / image`

`Gemini_usd = images × price_per_image_usd`

Flash のとき:

- `60 × 0.039 = $2.34`（約 `¥367`）

Pro（`gemini-3-pro-image-preview`）のとき:

- `60 × 0.134 = $8.04`（約 `¥1,261`）※1K/2K
- `60 × 0.24 = $14.40`（約 `¥2,259`）※4K

## 解析のモデル化（OpenAI）

OpenAI はトークン課金なので、ここは幅が出ます。最低限、以下を置いて概算します。

- トークン換算: `0.7 tokens / 文字`（日本語のざっくり）
- 解析回数: `60回`
- 1回あたり出力: `300 tokens`（JSONで summary/topics/tags/flow/heat/imagePrompt を返す程度）
- 1回あたり固定オーバーヘッド入力: `1200 tokens`（system prompt + schema + ヒストリ等の雑な見積）

代表値（200文字/分）のとき:

- 5時間の総文字数: `200×300=60,000文字`
- 入力トークン（文字）: `60,000×0.7=42,000 tok`
- 入力オーバーヘッド: `60×1,200=72,000 tok`
- 出力トークン: `60×300=18,000 tok`

料金:

- Input: `114,000 / 1e6 × $1.75 ≒ $0.20`
- Output: `18,000 / 1e6 × $14 ≒ $0.25`
- OpenAI 合計: **約 $0.45**

## まとめ（5時間 / 1時間 / 1分）

ここでは「Pro按分（$4/100K credits）」で Cartesia を見積もり、Gemini は Flash/Pro それぞれの Standard 単価、OpenAI は上の概算を使います。

為替: `USDJPY=156.843498`

### 代表値: 200文字/分（=60,000 credits）+ 解析60回（=画像60枚）

- Cartesia (Sonic): `60,000×0.00004 = $2.40`（約 `¥376`）
- OpenAI (analysis): `≈ $0.45`（約 `¥71`）

Gemini を Flash のまま（`gemini-2.5-flash-image`）使う場合:

- Gemini (image): `60×0.039 = $2.34`（約 `¥367`）
- 合計: **$5.19（約 ¥814）**
  - 1時間あたり: `$1.04（約 ¥163）`
  - 1分あたり: `$0.017（約 ¥2.7）`

Gemini を Pro（例: `gemini-3-pro-image-preview`）に切り替える場合:

- Gemini (image, 1K/2K): `60×0.134 = $8.04`（約 `¥1,261`）
  - 合計: **$10.89（約 ¥1,708）**
  - 1時間あたり: `$2.18（約 ¥342）`
  - 1分あたり: `$0.036（約 ¥5.7）`
- Gemini (image, 4K): `60×0.24 = $14.40`（約 `¥2,259`）
  - 合計: **$17.25（約 ¥2,706）**
  - 1時間あたり: `$3.45（約 ¥541）`
  - 1分あたり: `$0.058（約 ¥9.0）`

### 会話密度別（参考）

Gemini は「解析回数=60回」前提だと **会話量に依らず一定**ですが、Flash/Pro で `$/image` が変わります。

#### Flash の場合（Gemini画像= $2.34 固定）

| 文字/分 | Sonic credits(5h) | Cartesia(按分) | Gemini画像(60枚) | OpenAI(雑) | 合計(雑) |
| ------: | ----------------: | -------------: | ---------------: | ---------: | -------: |
|     150 |            45,000 |          $1.80 |            $2.34 |      $0.43 |    $4.57 |
|     200 |            60,000 |          $2.40 |            $2.34 |      $0.45 |    $5.19 |
|     250 |            75,000 |          $3.00 |            $2.34 |      $0.47 |    $5.81 |
|     300 |            90,000 |          $3.60 |            $2.34 |      $0.49 |    $6.43 |

#### Pro の場合（Gemini画像= $8.04 固定 / 1K/2K）

| 文字/分 | Sonic credits(5h) | Cartesia(按分) | Gemini画像(60枚) | OpenAI(雑) | 合計(雑) |
| ------: | ----------------: | -------------: | ---------------: | ---------: | -------: |
|     150 |            45,000 |          $1.80 |            $8.04 |      $0.43 |   $10.27 |
|     200 |            60,000 |          $2.40 |            $8.04 |      $0.45 |   $10.89 |
|     250 |            75,000 |          $3.00 |            $8.04 |      $0.47 |   $11.51 |
|     300 |            90,000 |          $3.60 |            $8.04 |      $0.49 |   $12.13 |

#### Pro の場合（Gemini画像= $14.40 固定 / 4K）

| 文字/分 | Sonic credits(5h) | Cartesia(按分) | Gemini画像(60枚) | OpenAI(雑) | 合計(雑) |
| ------: | ----------------: | -------------: | ---------------: | ---------: | -------: |
|     150 |            45,000 |          $1.80 |           $14.40 |      $0.43 |   $16.63 |
|     200 |            60,000 |          $2.40 |           $14.40 |      $0.45 |   $17.25 |
|     250 |            75,000 |          $3.00 |           $14.40 |      $0.47 |   $17.87 |
|     300 |            90,000 |          $3.60 |           $14.40 |      $0.49 |   $18.49 |

## 重要な注意（コストが跳ねる条件）

1. **解析回数が増えると、Gemini の画像コストが線形に増える**

たとえば 5時間で 120回解析（=120枚）なら:

- Gemini: `120×0.039 = $4.68`

2. **画像モデルを Pro 系に変えると、単価が変わる**

本リポジトリはデフォルトで `gemini-2.5-flash-image` を使っていますが、
`GEMINI_IMAGE_MODEL_PRO` に別モデルを指定すると価格体系が変わる可能性があります。
その場合は、指定したモデルIDの料金表に合わせて `$/image` を差し替えてください。

## 「一番マッシブ」な 1時間あたり（上振れ）目安

「とにかく上振れで見る」ため、以下を置きます。

- 会話密度: `300文字/分`（= 18,000文字/時）
- 画像モデル: Pro（例: `gemini-3-pro-image-preview`）
- 解析頻度:
  - 現行設定の上限: `12回/時`（= 5分ごとに解析・画像生成）
  - さらに上振れ（設定変更など）: `24回/時`（= 約2.5分ごとに解析・画像生成）

概算（1時間）: 現行設定の上限（12回/時・Pro 1K/2K 想定）

- Cartesia(Sonic): `18,000 credits × $0.00004 ≒ $0.72`
- Gemini(Pro 1K/2K): `12 images × $0.134 = $1.61`
- OpenAI(gpt-5.2): オーバーヘッド等を含めて `≈ $0.12`（雑）

合計: **約 `$2.45/時`（約 `¥384/時`）**

さらに上振れ（24回/時・かつ Pro を 4K で回す想定 / `imageSize=4K`）:

- Cartesia(Sonic): `$0.72`
- Gemini(Pro 4K): `24 images × $0.24 = $5.76`
- OpenAI(gpt-5.2): `≈ $0.20`（雑）
- 合計: **約 `$6.68/時`（約 `¥1,048/時`）**
